const uint16_t CIE8[256] = {
  0,    2,    4,    5,    7,    9,   11,   12,   14,   16,   18,   20,   21,   23,   25,   27,
  28,   30,   32,   34,   36,   37,   39,   41,   43,   45,   47,   49,   52,   54,   56,   59,
  61,   64,   66,   69,   72,   75,   77,   80,   83,   87,   90,   93,   96,  100,  103,  107,
  111,  115,  118,  122,  126,  131,  135,  139,  144,  148,  153,  157,  162,  167,  172,  177,
  182,  187,  193,  198,  204,  209,  215,  221,  227,  233,  239,  246,  252,  259,  265,  272,
  279,  286,  293,  300,  308,  315,  323,  330,  338,  346,  354,  362,  371,  379,  388,  396,
  405,  414,  423,  432,  442,  451,  461,  470,  480,  490,  501,  511,  521,  532,  543,  553,
  564,  576,  587,  598,  610,  622,  634,  646,  658,  670,  683,  695,  708,  721,  734,  748,
  761,  775,  788,  802,  816,  831,  845,  860,  874,  889,  904,  920,  935,  951,  966,  982,
  999, 1015, 1031, 1048, 1065, 1082, 1099, 1116, 1134, 1152, 1170, 1188, 1206, 1224, 1243, 1262,
  1281, 1300, 1320, 1339, 1359, 1379, 1399, 1420, 1440, 1461, 1482, 1503, 1525, 1546, 1568, 1590,
  1612, 1635, 1657, 1680, 1703, 1726, 1750, 1774, 1797, 1822, 1846, 1870, 1895, 1920, 1945, 1971,
  1996, 2022, 2048, 2074, 2101, 2128, 2155, 2182, 2209, 2237, 2265, 2293, 2321, 2350, 2378, 2407,
  2437, 2466, 2496, 2526, 2556, 2587, 2617, 2648, 2679, 2711, 2743, 2774, 2807, 2839, 2872, 2905,
  2938, 2971, 3005, 3039, 3073, 3107, 3142, 3177, 3212, 3248, 3283, 3319, 3356, 3392, 3429, 3466,
  3503, 3541, 3578, 3617, 3655, 3694, 3732, 3772, 3811, 3851, 3891, 3931, 3972, 4012, 4054, 4095,
};
/*
  const uint16_t CIE12[1501] = {
  0, 0, 1, 1, 1, 2, 2, 2, 2, 3,
  3, 3, 4, 4, 4, 5, 5, 5, 5, 6,
  6, 6, 7, 7, 7, 8, 8, 8, 8, 9,
  9, 9, 10, 10, 10, 11, 11, 11, 11, 12,
  12, 12, 13, 13, 13, 14, 14, 14, 15, 15,
  15, 15, 16, 16, 16, 17, 17, 17, 18, 18,
  18, 18, 19, 19, 19, 20, 20, 20, 21, 21,
  21, 21, 22, 22, 22, 23, 23, 23, 24, 24,
  24, 25, 25, 25, 25, 26, 26, 26, 27, 27,
  27, 28, 28, 28, 28, 29, 29, 29, 30, 30,
  30, 31, 31, 31, 31, 32, 32, 32, 33, 33,
  33, 34, 34, 34, 34, 35, 35, 35, 36, 36,
  36, 37, 37, 37, 37, 38, 38, 38, 39, 39,
  39, 40, 40, 40, 41, 41, 41, 42, 42, 42,
  43, 43, 43, 44, 44, 44, 45, 45, 45, 46,
  46, 46, 47, 47, 48, 48, 48, 49, 49, 49,
  50, 50, 50, 51, 51, 52, 52, 52, 53, 53,
  54, 54, 54, 55, 55, 56, 56, 56, 57, 57,
  58, 58, 58, 59, 59, 60, 60, 61, 61, 61,
  62, 62, 63, 63, 64, 64, 64, 65, 65, 66,
  66, 67, 67, 68, 68, 68, 69, 69, 70, 70,
  71, 71, 72, 72, 73, 73, 74, 74, 75, 75,
  76, 76, 77, 77, 78, 78, 79, 79, 80, 80,
  81, 81, 82, 82, 83, 83, 84, 84, 85, 85,
  86, 87, 87, 88, 88, 89, 89, 90, 90, 91,
  91, 92, 93, 93, 94, 94, 95, 95, 96, 97,
  97, 98, 98, 99, 100, 100, 101, 101, 102, 103,
  103, 104, 104, 105, 106, 106, 107, 107, 108, 109,
  109, 110, 111, 111, 112, 112, 113, 114, 114, 115,
  116, 116, 117, 118, 118, 119, 120, 120, 121, 122,
  122, 123, 124, 124, 125, 126, 127, 127, 128, 129,
  129, 130, 131, 131, 132, 133, 134, 134, 135, 136,
  137, 137, 138, 139, 139, 140, 141, 142, 142, 143,
  144, 145, 145, 146, 147, 148, 149, 149, 150, 151,
  152, 152, 153, 154, 155, 156, 156, 157, 158, 159,
  160, 160, 161, 162, 163, 164, 165, 165, 166, 167,
  168, 169, 170, 170, 171, 172, 173, 174, 175, 176,
  176, 177, 178, 179, 180, 181, 182, 183, 183, 184,
  185, 186, 187, 188, 189, 190, 191, 192, 193, 193,
  194, 195, 196, 197, 198, 199, 200, 201, 202, 203,
  204, 205, 206, 207, 208, 209, 210, 211, 212, 212,
  213, 214, 215, 216, 217, 218, 219, 220, 221, 222,
  223, 224, 226, 227, 228, 229, 230, 231, 232, 233,
  234, 235, 236, 237, 238, 239, 240, 241, 242, 243,
  244, 245, 247, 248, 249, 250, 251, 252, 253, 254,
  255, 256, 258, 259, 260, 261, 262, 263, 264, 265,
  267, 268, 269, 270, 271, 272, 274, 275, 276, 277,
  278, 279, 281, 282, 283, 284, 285, 287, 288, 289,
  290, 291, 293, 294, 295, 296, 297, 299, 300, 301,
  302, 304, 305, 306, 307, 309, 310, 311, 312, 314,
  315, 316, 318, 319, 320, 321, 323, 324, 325, 327,
  328, 329, 331, 332, 333, 335, 336, 337, 339, 340,
  341, 343, 344, 345, 347, 348, 349, 351, 352, 353,
  355, 356, 358, 359, 360, 362, 363, 365, 366, 367,
  369, 370, 372, 373, 375, 376, 377, 379, 380, 382,
  383, 385, 386, 388, 389, 391, 392, 394, 395, 397,
  398, 399, 401, 402, 404, 406, 407, 409, 410, 412,
  413, 415, 416, 418, 419, 421, 422, 424, 425, 427,
  429, 430, 432, 433, 435, 436, 438, 440, 441, 443,
  444, 446, 448, 449, 451, 453, 454, 456, 457, 459,
  461, 462, 464, 466, 467, 469, 471, 472, 474, 476,
  477, 479, 481, 482, 484, 486, 488, 489, 491, 493,
  494, 496, 498, 500, 501, 503, 505, 507, 508, 510,
  512, 514, 515, 517, 519, 521, 523, 524, 526, 528,
  530, 532, 533, 535, 537, 539, 541, 542, 544, 546,
  548, 550, 552, 554, 555, 557, 559, 561, 563, 565,
  567, 569, 570, 572, 574, 576, 578, 580, 582, 584,
  586, 588, 590, 592, 594, 595, 597, 599, 601, 603,
  605, 607, 609, 611, 613, 615, 617, 619, 621, 623,
  625, 627, 629, 631, 633, 635, 637, 639, 642, 644,
  646, 648, 650, 652, 654, 656, 658, 660, 662, 664,
  666, 669, 671, 673, 675, 677, 679, 681, 683, 686,
  688, 690, 692, 694, 696, 699, 701, 703, 705, 707,
  709, 712, 714, 716, 718, 720, 723, 725, 727, 729,
  732, 734, 736, 738, 741, 743, 745, 747, 750, 752,
  754, 757, 759, 761, 763, 766, 768, 770, 773, 775,
  777, 780, 782, 784, 787, 789, 791, 794, 796, 799,
  801, 803, 806, 808, 810, 813, 815, 818, 820, 822,
  825, 827, 830, 832, 835, 837, 840, 842, 844, 847,
  849, 852, 854, 857, 859, 862, 864, 867, 869, 872,
  874, 877, 879, 882, 885, 887, 890, 892, 895, 897,
  900, 902, 905, 908, 910, 913, 915, 918, 921, 923,
  926, 928, 931, 934, 936, 939, 942, 944, 947, 950,
  952, 955, 958, 960, 963, 966, 968, 971, 974, 976,
  979, 982, 985, 987, 990, 993, 996, 998, 1001, 1004,
  1007, 1009, 1012, 1015, 1018, 1021, 1023, 1026, 1029, 1032,
  1035, 1037, 1040, 1043, 1046, 1049, 1052, 1055, 1057, 1060,
  1063, 1066, 1069, 1072, 1075, 1078, 1080, 1083, 1086, 1089,
  1092, 1095, 1098, 1101, 1104, 1107, 1110, 1113, 1116, 1119,
  1122, 1125, 1128, 1131, 1134, 1137, 1140, 1143, 1146, 1149,
  1152, 1155, 1158, 1161, 1164, 1167, 1170, 1173, 1176, 1179,
  1182, 1185, 1188, 1192, 1195, 1198, 1201, 1204, 1207, 1210,
  1213, 1216, 1220, 1223, 1226, 1229, 1232, 1235, 1239, 1242,
  1245, 1248, 1251, 1255, 1258, 1261, 1264, 1267, 1271, 1274,
  1277, 1280, 1284, 1287, 1290, 1293, 1297, 1300, 1303, 1307,
  1310, 1313, 1317, 1320, 1323, 1327, 1330, 1333, 1337, 1340,
  1343, 1347, 1350, 1353, 1357, 1360, 1363, 1367, 1370, 1374,
  1377, 1381, 1384, 1387, 1391, 1394, 1398, 1401, 1405, 1408,
  1412, 1415, 1418, 1422, 1425, 1429, 1432, 1436, 1439, 1443,
  1447, 1450, 1454, 1457, 1461, 1464, 1468, 1471, 1475, 1478,
  1482, 1486, 1489, 1493, 1496, 1500, 1504, 1507, 1511, 1515,
  1518, 1522, 1526, 1529, 1533, 1537, 1540, 1544, 1548, 1551,
  1555, 1559, 1562, 1566, 1570, 1574, 1577, 1581, 1585, 1589,
  1592, 1596, 1600, 1604, 1607, 1611, 1615, 1619, 1623, 1626,
  1630, 1634, 1638, 1642, 1646, 1649, 1653, 1657, 1661, 1665,
  1669, 1673, 1676, 1680, 1684, 1688, 1692, 1696, 1700, 1704,
  1708, 1712, 1716, 1720, 1724, 1728, 1732, 1736, 1740, 1744,
  1748, 1752, 1756, 1760, 1764, 1768, 1772, 1776, 1780, 1784,
  1788, 1792, 1796, 1800, 1804, 1808, 1812, 1816, 1821, 1825,
  1829, 1833, 1837, 1841, 1845, 1849, 1854, 1858, 1862, 1866,
  1870, 1875, 1879, 1883, 1887, 1891, 1896, 1900, 1904, 1908,
  1913, 1917, 1921, 1925, 1930, 1934, 1938, 1942, 1947, 1951,
  1955, 1960, 1964, 1968, 1973, 1977, 1981, 1986, 1990, 1994,
  1999, 2003, 2008, 2012, 2016, 2021, 2025, 2030, 2034, 2038,
  2043, 2047, 2052, 2056, 2061, 2065, 2070, 2074, 2079, 2083,
  2088, 2092, 2097, 2101, 2106, 2110, 2115, 2119, 2124, 2128,
  2133, 2138, 2142, 2147, 2151, 2156, 2161, 2165, 2170, 2174,
  2179, 2184, 2188, 2193, 2198, 2202, 2207, 2212, 2216, 2221,
  2226, 2230, 2235, 2240, 2245, 2249, 2254, 2259, 2264, 2268,
  2273, 2278, 2283, 2287, 2292, 2297, 2302, 2307, 2311, 2316,
  2321, 2326, 2331, 2336, 2340, 2345, 2350, 2355, 2360, 2365,
  2370, 2375, 2380, 2385, 2389, 2394, 2399, 2404, 2409, 2414,
  2419, 2424, 2429, 2434, 2439, 2444, 2449, 2454, 2459, 2464,
  2469, 2474, 2479, 2484, 2489, 2494, 2500, 2505, 2510, 2515,
  2520, 2525, 2530, 2535, 2540, 2546, 2551, 2556, 2561, 2566,
  2571, 2577, 2582, 2587, 2592, 2597, 2603, 2608, 2613, 2618,
  2623, 2629, 2634, 2639, 2645, 2650, 2655, 2660, 2666, 2671,
  2676, 2682, 2687, 2692, 2698, 2703, 2708, 2714, 2719, 2724,
  2730, 2735, 2741, 2746, 2751, 2757, 2762, 2768, 2773, 2779,
  2784, 2790, 2795, 2800, 2806, 2811, 2817, 2822, 2828, 2833,
  2839, 2845, 2850, 2856, 2861, 2867, 2872, 2878, 2883, 2889,
  2895, 2900, 2906, 2912, 2917, 2923, 2928, 2934, 2940, 2945,
  2951, 2957, 2962, 2968, 2974, 2980, 2985, 2991, 2997, 3002,
  3008, 3014, 3020, 3025, 3031, 3037, 3043, 3049, 3054, 3060,
  3066, 3072, 3078, 3084, 3089, 3095, 3101, 3107, 3113, 3119,
  3125, 3131, 3136, 3142, 3148, 3154, 3160, 3166, 3172, 3178,
  3184, 3190, 3196, 3202, 3208, 3214, 3220, 3226, 3232, 3238,
  3244, 3250, 3256, 3262, 3268, 3274, 3280, 3287, 3293, 3299,
  3305, 3311, 3317, 3323, 3329, 3336, 3342, 3348, 3354, 3360,
  3366, 3373, 3379, 3385, 3391, 3397, 3404, 3410, 3416, 3422,
  3429, 3435, 3441, 3448, 3454, 3460, 3467, 3473, 3479, 3486,
  3492, 3498, 3505, 3511, 3517, 3524, 3530, 3537, 3543, 3549,
  3556, 3562, 3569, 3575, 3582, 3588, 3594, 3601, 3607, 3614,
  3620, 3627, 3633, 3640, 3646, 3653, 3660, 3666, 3673, 3679,
  3686, 3692, 3699, 3706, 3712, 3719, 3725, 3732, 3739, 3745,
  3752, 3759, 3765, 3772, 3779, 3785, 3792, 3799, 3806, 3812,
  3819, 3826, 3833, 3839, 3846, 3853, 3860, 3866, 3873, 3880,
  3887, 3894, 3900, 3907, 3914, 3921, 3928, 3935, 3942, 3949,
  3955, 3962, 3969, 3976, 3983, 3990, 3997, 4004, 4011, 4018,
  4025, 4032, 4039, 4046, 4053, 4060, 4067, 4074, 4081, 4088,
  4095,
  };

  const uint16_t CIE[1024] = {
  0,    7,   14,   21,   28,   35,   43,   50,   57,   64,   71,   78,   85,   92,   99,  106,
  113,  121,  128,  135,  142,  149,  156,  163,  170,  177,  184,  191,  199,  206,  213,  220,
  227,  234,  241,  248,  255,  262,  269,  277,  284,  291,  298,  305,  312,  319,  326,  333,
  340,  348,  355,  362,  369,  376,  383,  390,  397,  404,  411,  418,  426,  433,  440,  447,
  454,  461,  468,  475,  482,  489,  496,  504,  511,  518,  525,  532,  539,  546,  553,  560,
  567,  574,  582,  589,  596,  603,  610,  617,  624,  631,  638,  648,  655,  663,  671,  679,
  687,  695,  703,  711,  719,  727,  735,  744,  752,  761,  769,  778,  786,  795,  804,  813,
  822,  831,  840,  849,  858,  867,  876,  886,  895,  905,  914,  924,  934,  943,  953,  963,
  973,  983,  993, 1004, 1014, 1024, 1034, 1045, 1055, 1066, 1077, 1087, 1098, 1109, 1120, 1131,
  1142, 1153, 1165, 1176, 1187, 1199, 1210, 1222, 1234, 1245, 1257, 1269, 1281, 1293, 1305, 1318,
  1330, 1342, 1355, 1367, 1380, 1392, 1405, 1418, 1431, 1444, 1457, 1470, 1483, 1497, 1510, 1523,
  1537, 1551, 1564, 1578, 1592, 1606, 1620, 1634, 1648, 1662, 1677, 1691, 1706, 1720, 1735, 1750,
  1765, 1780, 1795, 1810, 1825, 1840, 1855, 1871, 1886, 1902, 1918, 1933, 1949, 1965, 1981, 1997,
  2014, 2030, 2046, 2063, 2079, 2096, 2113, 2130, 2146, 2163, 2181, 2198, 2215, 2232, 2250, 2267,
  2285, 2303, 2321, 2338, 2356, 2375, 2393, 2411, 2429, 2448, 2466, 2485, 2504, 2523, 2542, 2561,
  2580, 2599, 2618, 2638, 2657, 2677, 2697, 2716, 2736, 2756, 2776, 2796, 2817, 2837, 2858, 2878,
  2899, 2920, 2941, 2961, 2983, 3004, 3025, 3046, 3068, 3089, 3111, 3133, 3155, 3177, 3199, 3221,
  3243, 3266, 3288, 3311, 3333, 3356, 3379, 3402, 3425, 3448, 3472, 3495, 3519, 3542, 3566, 3590,
  3614, 3638, 3662, 3686, 3711, 3735, 3760, 3784, 3809, 3834, 3859, 3884, 3910, 3935, 3960, 3986,
  4012, 4037, 4063, 4089, 4115, 4142, 4168, 4194, 4221, 4248, 4274, 4301, 4328, 4356, 4383, 4410,
  4438, 4465, 4493, 4521, 4549, 4577, 4605, 4633, 4661, 4690, 4719, 4747, 4776, 4805, 4834, 4863,
  4893, 4922, 4952, 4981, 5011, 5041, 5071, 5101, 5131, 5162, 5192, 5223, 5254, 5285, 5316, 5347,
  5378, 5409, 5441, 5472, 5504, 5536, 5568, 5600, 5632, 5664, 5697, 5729, 5762, 5795, 5828, 5861,
  5894, 5928, 5961, 5995, 6028, 6062, 6096, 6130, 6164, 6199, 6233, 6268, 6302, 6337, 6372, 6407,
  6442, 6478, 6513, 6549, 6585, 6621, 6657, 6693, 6729, 6765, 6802, 6839, 6875, 6912, 6949, 6986,
  7024, 7061, 7099, 7137, 7174, 7212, 7250, 7289, 7327, 7366, 7404, 7443, 7482, 7521, 7560, 7600,
  7639, 7679, 7718, 7758, 7798, 7838, 7879, 7919, 7960, 8000, 8041, 8082, 8123, 8165, 8206, 8248,
  8289, 8331, 8373, 8415, 8457, 8500, 8542, 8585, 8628, 8671, 8714, 8757, 8800, 8844, 8887, 8931,
  8975, 9019, 9064, 9108, 9152, 9197, 9242, 9287, 9332, 9377, 9423, 9468, 9514, 9560, 9606, 9652,
  9698, 9745, 9791, 9838, 9885, 9932, 9979, 10026, 10074, 10121, 10169, 10217, 10265, 10313, 10362, 10410,
  10459, 10508, 10557, 10606, 10655, 10704, 10754, 10804, 10854, 10904, 10954, 11004, 11055, 11105, 11156, 11207,
  11258, 11310, 11361, 11413, 11464, 11516, 11568, 11620, 11673, 11725, 11778, 11831, 11884, 11937, 11990, 12044,
  12097, 12151, 12205, 12259, 12314, 12368, 12423, 12477, 12532, 12587, 12643, 12698, 12754, 12809, 12865, 12921,
  12977, 13034, 13090, 13147, 13204, 13261, 13318, 13375, 13433, 13491, 13548, 13606, 13665, 13723, 13781, 13840,
  13899, 13958, 14017, 14077, 14136, 14196, 14256, 14316, 14376, 14436, 14497, 14557, 14618, 14679, 14740, 14802,
  14863, 14925, 14987, 15049, 15111, 15173, 15236, 15299, 15362, 15425, 15488, 15551, 15615, 15679, 15743, 15807,
  15871, 15935, 16000, 16065, 16130, 16195, 16260, 16326, 16392, 16457, 16523, 16590, 16656, 16723, 16789, 16856,
  16923, 16991, 17058, 17126, 17194, 17261, 17330, 17398, 17467, 17535, 17604, 17673, 17742, 17812, 17881, 17951,
  18021, 18091, 18162, 18232, 18303, 18374, 18445, 18516, 18588, 18659, 18731, 18803, 18875, 18947, 19020, 19093,
  19166, 19239, 19312, 19385, 19459, 19533, 19607, 19681, 19755, 19830, 19905, 19980, 20055, 20130, 20206, 20281,
  20357, 20433, 20510, 20586, 20663, 20740, 20817, 20894, 20971, 21049, 21127, 21205, 21283, 21361, 21440, 21519,
  21598, 21677, 21756, 21836, 21915, 21995, 22075, 22156, 22236, 22317, 22398, 22479, 22560, 22642, 22723, 22805,
  22887, 22969, 23052, 23135, 23217, 23300, 23384, 23467, 23551, 23635, 23719, 23803, 23887, 23972, 24057, 24142,
  24227, 24313, 24398, 24484, 24570, 24656, 24743, 24829, 24916, 25003, 25091, 25178, 25266, 25354, 25442, 25530,
  25618, 25707, 25796, 25885, 25974, 26064, 26153, 26243, 26334, 26424, 26514, 26605, 26696, 26787, 26879, 26970,
  27062, 27154, 27246, 27338, 27431, 27524, 27617, 27710, 27804, 27897, 27991, 28085, 28179, 28274, 28369, 28463,
  28559, 28654, 28749, 28845, 28941, 29037, 29134, 29230, 29327, 29424, 29521, 29619, 29717, 29815, 29913, 30011,
  30110, 30208, 30307, 30406, 30506, 30605, 30705, 30805, 30906, 31006, 31107, 31208, 31309, 31410, 31512, 31614,
  31716, 31818, 31920, 32023, 32126, 32229, 32332, 32436, 32540, 32644, 32748, 32852, 32957, 33062, 33167, 33272,
  33378, 33484, 33590, 33696, 33802, 33909, 34016, 34123, 34230, 34338, 34446, 34554, 34662, 34770, 34879, 34988,
  35097, 35206, 35316, 35426, 35536, 35646, 35757, 35867, 35978, 36090, 36201, 36313, 36425, 36537, 36649, 36762,
  36874, 36987, 37101, 37214, 37328, 37442, 37556, 37671, 37785, 37900, 38015, 38131, 38246, 38362, 38478, 38594,
  38711, 38828, 38945, 39062, 39179, 39297, 39415, 39533, 39651, 39770, 39889, 40008, 40127, 40247, 40367, 40487,
  40607, 40728, 40848, 40969, 41091, 41212, 41334, 41456, 41578, 41700, 41823, 41946, 42069, 42193, 42316, 42440,
  42564, 42689, 42813, 42938, 43063, 43189, 43314, 43440, 43566, 43692, 43819, 43946, 44073, 44200, 44328, 44456,
  44584, 44712, 44840, 44969, 45098, 45227, 45357, 45487, 45617, 45747, 45877, 46008, 46139, 46270, 46402, 46534,
  46666, 46798, 46930, 47063, 47196, 47329, 47463, 47596, 47730, 47865, 47999, 48134, 48269, 48404, 48540, 48675,
  48811, 48948, 49084, 49221, 49358, 49495, 49633, 49771, 49909, 50047, 50185, 50324, 50463, 50603, 50742, 50882,
  51022, 51162, 51303, 51444, 51585, 51726, 51868, 52010, 52152, 52294, 52437, 52580, 52723, 52867, 53010, 53154,
  53299, 53443, 53588, 53733, 53878, 54024, 54169, 54315, 54462, 54608, 54755, 54902, 55050, 55197, 55345, 55493,
  55642, 55790, 55939, 56089, 56238, 56388, 56538, 56688, 56839, 56989, 57140, 57292, 57443, 57595, 57747, 57900,
  58053, 58205, 58359, 58512, 58666, 58820, 58974, 59129, 59284, 59439, 59594, 59750, 59906, 60062, 60218, 60375,
  60532, 60689, 60847, 61005, 61163, 61321, 61480, 61639, 61798, 61957, 62117, 62277, 62437, 62598, 62759, 62920,
  63081, 63243, 63405, 63567, 63729, 63892, 64055, 64219, 64382, 64546, 64710, 64875, 65039, 65204, 65369, 65535,
  };
*/

/*
  #define LED1 PA0
  #define LED2 PA1
  #define LED3 PA2

  #define MOSFET PA3

  #define SENSOR1 PA5
  #define SENSOR2 PA6
  #define SENSORL PA7
*/

#define LED_S1 PB1
#define LED_SL1 PA5
#define LED_S2 PC6
#define LED_SL2 PA8
#define LED_STATUS PB3

#define MOSFET PA4

#define S1 PB2
#define SL1 PB0
#define S2 PA6
#define SL2 PA7

#define MAX_BRI 255 // out of 255
#define L_THRESHOLD_ENABLE 1300 // out of 4095
#define L_THRESHOLD_DISABLE 1500 // out of 4095
#define AUTO_OFF_DELAY 30000 // 10s
#define TURN_ON_DURATION 1000 // 1s
#define TURN_OFF_DURATION 10000 // 10s

int delayFadeIn = TURN_ON_DURATION / MAX_BRI;
int delayFadeOut = TURN_OFF_DURATION / MAX_BRI;

unsigned long millis_light_started;
bool sensor_1_val, sensor_2_val, sensor_light_1_en, sensor_light_2_en;
int sensor_light_1_val, sensor_light_2_val, current_bri;

// the setup function runs once when you press reset or power the board
void setup() {
  analogWriteFrequency(4000);
  analogWriteResolution(12);
  analogReadResolution(12);

  pinMode(LED_S1, OUTPUT);
  pinMode(LED_SL1, OUTPUT);
  pinMode(LED_S2, OUTPUT);
  pinMode(LED_SL2, OUTPUT);
  pinMode(LED_STATUS, OUTPUT);

  pinMode(MOSFET, OUTPUT);

  pinMode(S1, INPUT_PULLDOWN);
  pinMode(SL1, INPUT);
  pinMode(S2, INPUT_PULLDOWN);
  pinMode(SL2, INPUT);

  Serial.begin(115200);
}

// the loop function runs over and over again forever
void loop() {
  sensor_1_val = digitalRead(S1);
  sensor_2_val = digitalRead(S2);
  sensor_light_1_val = 4095 - analogRead(SL1);
  sensor_light_2_val = 4095 - analogRead(SL2);

  if (sensor_light_1_val < L_THRESHOLD_ENABLE) sensor_light_1_en = true;
  if (sensor_light_1_val > L_THRESHOLD_DISABLE) sensor_light_1_en = false;

  if (sensor_light_2_val < L_THRESHOLD_ENABLE) sensor_light_2_en = true;
  if (sensor_light_2_val > L_THRESHOLD_DISABLE) sensor_light_2_en = false;

  digitalWrite(LED_S1, sensor_1_val);
  digitalWrite(LED_S2, sensor_2_val);
  digitalWrite(LED_SL1, sensor_light_1_en);
  digitalWrite(LED_SL2, sensor_light_2_en);

  if ((sensor_1_val || sensor_2_val) && (sensor_light_1_en || sensor_light_2_en)) {
    millis_light_started = millis();
  }

  //analogWrite(MOSFET, CIE8[1]);
  //analogWrite(LED_STATUS, CIE8[1]);


  if (millis() - millis_light_started <= AUTO_OFF_DELAY) {
    current_bri++;
    if (current_bri > MAX_BRI) current_bri = MAX_BRI;
    analogWrite(MOSFET, CIE8[current_bri]);
    analogWrite(LED_STATUS, CIE8[current_bri]);
    delay(delayFadeIn);
  } else {
    current_bri--;
    if (current_bri < 0) current_bri = 0;
    analogWrite(MOSFET, CIE8[current_bri]);
    analogWrite(LED_STATUS, CIE8[current_bri]);
    delay(delayFadeOut);
  }

  Serial.print("S1: ");
  Serial.print(sensor_1_val);
  Serial.print(", S2: ");
  Serial.print(sensor_2_val);
  Serial.print(", L1: ");
  Serial.println(sensor_light_1_val);
  Serial.print(", L2: ");
  Serial.println(sensor_light_2_val);

}
